# Fog_Forecast
KOPIS 날씨 빅데이터 분석, 안개 발생 여부 진단 모델 개발

이 프로젝트는 기상 데이터를 기반으로 안개 발생 여부를 예측하는 모델을 개발하는 것을 목표로 합니다. 

주요 단계는 다음과 같습니다:

1. 데이터 EDA 및 전처리
2. 모델 학습
3. 모델 평가  

## **0. 사용한 변수**
![사용한 변수](https://github.com/user-attachments/assets/9ddecae1-60e2-487e-a74e-bdcdfdb86ff7)
![바잉올린 플롯](https://github.com/user-attachments/assets/89044e17-3681-4915-ab48-39aaac4c9f45)

## **1. 데이터 전처리 및 변수 추가**
### 1.1 결측값 처리기상_시간선형보간, 로지스틱 함수(강수 여부)
제공 데이터의 평균 기온, 평균 상대 습도, 일사량 합계, 평균 풍향, 평균 풍속, 평균 지면온도, 강수 유무에서 값이 -90이하인 값은 결측치로 고려했으며, 강수 유무를 제외한 나머지값은 시간 선형 보간법을 이용하여 결측치를 채우다. 또한, 강수 유무에 대한 변수는 로지스틱 회귀 모델을 적합한 값을 이용해 결측치를 채웠다.

### 1.2 datetime 변수 생성 및 주기성 변수 추가
연도 데이터를 변환해서 연도, 월, 일, 시간, 분을 결합하여 datetime 형식을 지정하고 sin, cos함수를 이용하여 주기성 변수를 새로 생성했다.

### 1.3 파생변수 추가
1.3.1 위치 변수 (st)
stn_id 그룹별로 ta, sun10, ts의 평균을 찾아서 위치변수를 생성했다. 같은 그룹은 같은 위치를 갖도록 st변수를 생성해서 지역별 특성을 반영하고자 했다.

1.3.2 기온과 노점온도 변수 (ta, tb, ta_tb_diff)
Magnus-Tetens 공식으로 노점 온도 tb 계산했으며, 기온 ta와 노점온도 tb간의 차이를 계산해 기온과 노점온도 차이 변수를 새로 생성해서 추가했다.

1.3.3 풍속, 풍향의 상호작용 변수 (ws10_new)
내륙 지역에서는 일반적으로 바람의 영향이 상대적으로 약하지만, 국지적인 풍계의 변화를 파악할 수 있다. 강한 바람은 대기 상태의 불안정성을 나타낼 수 있다. 이를 반영하는 변수를 추가하고자 했다.풍속과 풍향의 상호작용 변수는 안개 발생 메커니즘을 보다 효과적으로 이해하고, 안개 예측 모델의 정확도를 높이는 데 활용될 수 있다.

### 1.4 이상치 탐지
이상치에 대한 영향을 줄이기 위해 IQR을 사용해 탐지한 후 평균값을 대체했다.

### 1.5 정규화
min-max 방법으로 평균 풍향, 평균 풍속, 평균 기온 10분 주기, 평균 상대 습도 10분 주기, 일사량 10분 단위 합계, 평균 지면온도 10분 주기의 변수들을 정규화시켰다.

## **2. 모델 학습**
### 2.1 모델 구축
XGBoost, Random Forest, ANN, Stacking Ensemble
![모델별 예측 결과](https://github.com/user-attachments/assets/f6ab3e84-3075-4ef7-a255-0271e6f18bf4)

## **3. 모델 평가**
![최종검증결과](https://github.com/user-attachments/assets/915658d5-06f5-4587-acb5-554086fcc69d)

